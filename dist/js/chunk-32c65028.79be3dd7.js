(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32c65028"],{12761:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-text-field",{staticStyle:{"min-width":"90px"},attrs:{dir:"ltr",placeholder:t.placeholder,disabled:t.disabled,"append-icon":"fa-clock",clearable:""},on:{input:t.change,"click:append":t.setToday},model:{value:t.localValue,callback:function(e){t.localValue=e},expression:"localValue"}})},s=[],n=(a("7fd9"),a("a67b"),a("0d16")),o={name:"Time",props:["value","id","default","disabled","placeholder"],data:function(){return{localValue:null,mask:null,isDirty:!1}},watch:{value:function(){this.localValue=this.value,void 0==this.localValue&&this.setToday(),this.change()}},created:function(){this.mask=n["a"].createMask({mask:"HH:MM",blocks:{HH:{mask:n["a"].MaskedRange,from:0,to:23},MM:{mask:n["a"].MaskedRange,from:0,to:59}}})},mounted:function(){this.default?this.setToday():this.localValue=this.value},methods:{change:function(){var t=this;this.isDirty=!0,this.localValue!=this.mask.value&&(this.mask.resolve(String(this.localValue)),this.$nextTick((function(){t.localValue=t.mask.value})),this.$emit("input",this.mask.value))},setToday:function(){this.localValue=this.now.format("HH:mm"),this.change(),this.$emit("input",this.mask.value)}}},l=o,c=(a("61e7"),a("2877")),r=a("6544"),d=a.n(r),u=a("8654"),m=Object(c["a"])(l,i,s,!1,null,"7e748306",null);e["a"]=m.exports;d()(m,{VTextField:u["a"]})},4633:function(t,e,a){"use strict";var i=a("ae79");e["a"]={components:{OpenSanadBtn:i["a"]},data:function(){return{editable:!1}},created:function(){this.setEditable()},watch:{id:function(){this.setEditable()}},methods:{setEditable:function(){this.id?this.editable=!1:this.editable=!0},makeFormEditable:function(){this.editable=!0},makeFormUneditable:function(){this.editable=!1}}}},"5c8b":function(t,e,a){},"61e7":function(t,e,a){"use strict";var i=a("5c8b"),s=a.n(i);s.a},9594:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-form",{attrs:{title:t.title,showList:!1,listRoute:{name:"List",params:{form:"adjustment",type:t.type}},exportParams:{id:this.id},isEditing:t.isEditing,canDelete:t.canDelete,canSubmit:t.canSubmit},on:{"update:isEditing":function(e){t.isEditing=e},"update:is-editing":function(e){t.isEditing=e},clearForm:function(e){return t.clearForm(!0)},goToForm:t.getItemByPosition,submit:t.validate,delete:t.deleteItem},scopedSlots:t._u([{key:"header-btns",fn:function(){return[t.item.sanad?a("open-sanad-btn",{attrs:{sanad:t.item.sanad}}):t._e()]},proxy:!0}])},[[a("v-row",[a("v-col",{attrs:{cols:"12",md:"2"}},[a("v-text-field",{attrs:{label:"شماره انتقال",disabled:""},model:{value:t.item.code,callback:function(e){t.$set(t.item,"code",e)},expression:"item.code"}})],1),a("v-col",{attrs:{cols:"12",md:"2"}},[a("date",{attrs:{label:" * تاریخ",default:!0,disabled:!t.isEditing},model:{value:t.item.date,callback:function(e){t.$set(t.item,"date",e)},expression:"item.date"}})],1),a("v-col",{attrs:{cols:"12",md:"5"}},[a("v-textarea",{staticClass:"form-control",attrs:{label:"توضیحات",disabled:!t.isEditing},model:{value:t.item.explanation,callback:function(e){t.$set(t.item,"explanation",e)},expression:"item.explanation"}})],1),a("v-col",{attrs:{cols:"12",md:"3"}},[t.item.created_by?a("v-text-field",{attrs:{label:"ثبت کننده",disabled:""},model:{value:t.item.created_by.name,callback:function(e){t.$set(t.item.created_by,"name",e)},expression:"item.created_by.name"}}):t._e()],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-simple-table",[a("thead",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("* نام/کد کالا")]),a("th",[t._v("* انبار")]),a("th",[t._v("* تعداد")]),a("th",[t._v("توضیحات")]),a("th",{staticClass:"d-print-none"})])]),a("tbody",[t._l(t.rows,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"tr-counter"},[t._v(t._s(i+1))]),a("td",{staticClass:"tr-ware"},[a("ware-select",{attrs:{disabled:!t.isEditing},model:{value:t.rows[i].ware,callback:function(e){t.$set(t.rows[i],"ware",e)},expression:"rows[i].ware"}})],1),a("td",{staticClass:"tr-warehouse"},[t.rows[i].ware?a("v-autocomplete",{attrs:{"return-object":!0,items:t.warehouses,"item-text":"name","item-value":"id",disabled:!t.isEditing},model:{value:t.rows[i].warehouse,callback:function(e){t.$set(t.rows[i],"warehouse",e)},expression:"rows[i].warehouse"}}):a("span",[t._v("-")])],1),a("td",[a("money",{attrs:{disabled:!t.isEditing},model:{value:t.rows[i].count,callback:function(e){t.$set(t.rows[i],"count",e)},expression:"rows[i].count"}})],1),a("td",[a("v-text-field",{attrs:{disabled:!t.isEditing},model:{value:t.rows[i].explanation,callback:function(e){t.$set(t.rows[i],"explanation",e)},expression:"rows[i].explanation"}})],1),a("td",{staticClass:"d-print-none"},[i!=t.rows.length-1?a("v-btn",{staticClass:"red--text",attrs:{icon:"",disabled:!t.isEditing},on:{click:function(e){return t.deleteRow(i)}}},[a("v-icon",[t._v("delete")])],1):t._e()],1)])})),a("tr",{staticClass:"bg-info text-white"},[a("td",{attrs:{colspan:"2"}}),a("td",[t._v("جمع")]),a("td",[t._v(t._s(t._f("toMoney")(t.sum)))]),a("td",{attrs:{colspan:"1"}}),a("td",[a("v-btn",{staticClass:"red--text",attrs:{icon:"",disabled:!t.isEditing},on:{click:function(e){return t.deleteRow(-1)}}},[a("v-icon",[t._v("delete_sweep")])],1)],1)])],2)])],1)],1)]],2)},s=[],n=(a("4160"),a("d81d"),a("fb6a"),a("159b"),a("a6c2")),o=a("4633"),l=a("3c1f"),c=a("0359"),r=a("12761"),d=(a("2ef0"),a("da4b")),u={name:"Form",components:{money:l["a"],date:c["a"],mtime:r["a"]},mixins:[o["a"],n["a"],d["b"]],props:{id:{},type:{required:!0}},data:function(){return{baseUrl:"factors/adjustments",permissionBasename:"adjustment",leadingSlash:!0,rowKey:"ware",hasList:!1,hasIdProp:!0,inventory:{ware:null,warehouses:[]}}},methods:{getItemByPosition:function(t){var e=this;return this.request({url:this.endpoint("".concat(this.baseUrl,"/byPosition")),method:"get",params:{id:this.item.id,position:t,type:this.type},success:function(t){e.setItem(t)}})},getData:function(){this.getWarehouses()},validate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=!0;1==this.rows.length&&(this.notify("حداقل یک ردیف وارد کنید","danger"),a=!1),this.rows.forEach((function(e,i){i!=t.rows.length-1&&(e.count&&0!=e.count||(t.notify("لطفا تعداد ردیف ".concat(i+1," را وارد کنید"),"danger"),a=!1))})),a&&this.submit(e)},getSerialized:function(){var t=this.extractIds(this.item),e=this.rows.slice(0,this.rows.length-1);return e=e.map(this.extractIds),t.items=e,t.type=this.type,{adjustment:t}},setItem:function(t){this.item=t,this.rows=t.items,this.rows.push(this.copy(this.rowTemplate)),this.changeRouteTo(t.id)}},computed:{title:function(){return"ia"==this.type?"رسید تعدیل انبار":"حواله تعدیل انبار"},sum:function(){var t=0;return this.rows.forEach((function(e){e.count&&(t+=+e.count)})),t}}},m=u,h=a("2877"),f=a("6544"),p=a.n(f),b=a("c6a6"),v=a("8336"),w=a("62ad"),g=a("132d"),x=a("0fd9"),k=a("1f4f"),y=a("8654"),_=a("a844"),E=Object(h["a"])(m,i,s,!1,null,"3c48a8a0",null);e["default"]=E.exports;p()(E,{VAutocomplete:b["a"],VBtn:v["a"],VCol:w["a"],VIcon:g["a"],VRow:x["a"],VSimpleTable:k["a"],VTextField:y["a"],VTextarea:_["a"]})}}]);
//# sourceMappingURL=chunk-32c65028.79be3dd7.js.map