{"version":3,"sources":["webpack:///./src/modules/dashtbashi/LadingMixin.js","webpack:///./src/modules/dashtbashi/OtherDriverPayment.vue?3ae8","webpack:///./src/modules/dashtbashi/OtherDriverPayment.vue?674f","webpack:///src/modules/dashtbashi/OtherDriverPayment.vue","webpack:///./src/modules/dashtbashi/OtherDriverPayment.vue?0ef1","webpack:///./src/modules/dashtbashi/OtherDriverPayment.vue","webpack:///./src/modules/dashtbashi/GetApi.js"],"names":["methods","getCarIncome","item","value","destination_amount","fare_price","car_income","getLadingSum","driver_tip_price","this","lading_total_value","getCargoDebt","association_price","bill_price","cargo_tip_price","cargo_debt","render","_vm","_h","$createElement","_c","_self","attrs","isEditing","canDelete","canSubmit","id","confirmBtnText","cancelConfirmBtnText","canConfirm","canCancelConfirm","on","$event","cancelConfirm","confirm","getItemByPosition","openPaymentDialog","deleteItem","clearForm","scopedSlots","_u","key","fn","staticClass","name","params","transactionType","payment","_v","_s","code","_e","proxy","model","callback","$$v","$set","expression","$store","state","drivings","filter","o","car","owner","undefined","getDrivingData","created_by","ladingHeaders","ladings","ref","_f","selectedLadings","imprestHeaders","imprests","sanad","bed","getImprestSettledValue","getImprestNotSettledValue","selectedImprests","tipsSum","carIncomesSum","ladingsSum","cargoDebtsSum","imprestsSum","payableValue","paymentDialog","validate","staticRenderFns","mixins","components","props","data","baseUrl","leadingSlash","permissionBasename","hasList","hasIdProp","performClearForm","computed","reduce","imprest","imprestSettlements","getData","getDrivings","drivingId","$nextTick","getDrivingLadings","driving","getDriverNotSettledImprests","request","url","endpoint","method","is_paid","success","payment_sum","notify","submit","account","payableAccount","floatAccount","driver","getItemTemplate","getRowTemplate","tax_percent","getOptionValue","position","setItem","changeRouteTo","deleteRow","index","rows","forEach","row","splice","length","itemsToDelete","push","getSerialized","extractIds","map","see","component","VAutocomplete","VBtn","VChip","VCol","VDialog","VRow","VSimpleTable","VTextField","VTextarea","months","text","tipPayers","title","remittancePaymentMethods","receiveTypes","getDrivers","force","drivers","commit","getCars","cars","getAssociations","associations","getRemittances","code__icontains","remittances","String"],"mappings":"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","file":"js/chunk-0ed5c824.380e04cd.js","sourcesContent":["export default {\r\n  methods: {\r\n    getCarIncome(item) {\r\n      let value = item.destination_amount * item.fare_price;\r\n      item.car_income = value;\r\n      return value\r\n    },\r\n    getLadingSum(item) {\r\n      let value = +item.driver_tip_price + this.getCarIncome(item);\r\n      item.lading_total_value = value;\r\n      return value;\r\n    },\r\n    getCargoDebt(item) {\r\n      let value = +item.association_price + +item.bill_price + +item.cargo_tip_price;\r\n      item.cargo_debt = value;\r\n      return value;\r\n    },\r\n  }\r\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtherDriverPayment.vue?vue&type=style&index=0&id=ad0f8eaa&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtherDriverPayment.vue?vue&type=style&index=0&id=ad0f8eaa&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('m-form',{attrs:{\"title\":\"پرداخت رانندگان متفرقه\",\"formName\":\"پرداخت رانندگان متفرقه\",\"isEditing\":_vm.isEditing,\"deletable\":true,\"showList\":false,\"showListBtn\":false,\"canDelete\":_vm.canDelete,\"canSubmit\":_vm.canSubmit && !this.id,\"confirmBtnText\":_vm.confirmBtnText,\"cancelConfirmBtnText\":_vm.cancelConfirmBtnText,\"canConfirm\":_vm.canConfirm,\"canCancelConfirm\":_vm.canCancelConfirm},on:{\"update:isEditing\":function($event){_vm.isEditing=$event},\"update:is-editing\":function($event){_vm.isEditing=$event},\"cancelConfirm\":_vm.cancelConfirm,\"confirm\":_vm.confirm,\"goToForm\":_vm.getItemByPosition,\"submit\":_vm.openPaymentDialog,\"delete\":_vm.deleteItem,\"clearForm\":function($event){return _vm.clearForm()}},scopedSlots:_vm._u([{key:\"header-btns\",fn:function(){return [(_vm.id)?_c('v-btn',{staticClass:\"blue white--text mr-1\",attrs:{\"target\":\"_blank\",\"to\":{name:'TransactionForm', params: {transactionType: 'payment', id: _vm.item.payment.id}}}},[_vm._v(\" مشاهده دریافت \"),_c('v-chip',{staticClass:\"app-background-color mr-2\",attrs:{\"x-small\":\"\"}},[_vm._v(_vm._s(_vm.item.payment.code))])],1):_vm._e()]},proxy:true}])},[[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"2\"}},[_c('v-text-field',{attrs:{\"label\":\"شماره\",\"disabled\":\"\"},model:{value:(_vm.item.code),callback:function ($$v) {_vm.$set(_vm.item, \"code\", $$v)},expression:\"item.code\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-autocomplete',{attrs:{\"label\":\"حمل کننده\",\"items\":_vm.$store.state.drivings.filter(function (o) { return o.car.owner == 'o'; }),\"item-text\":\"title\",\"item-value\":\"id\",\"disabled\":this.id != undefined,\"return-object\":true},on:{\"change\":_vm.getDrivingData},model:{value:(_vm.item.driving),callback:function ($$v) {_vm.$set(_vm.item, \"driving\", $$v)},expression:\"item.driving\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"2\"}},[_c('date',{attrs:{\"label\":\"تاریخ\",\"default\":true,\"disabled\":this.id != undefined},model:{value:(_vm.item.date),callback:function ($$v) {_vm.$set(_vm.item, \"date\", $$v)},expression:\"item.date\"}})],1),_c('v-col',{attrs:{\"cols\":\"2\"}},[(_vm.item.created_by)?_c('v-text-field',{attrs:{\"label\":\"ثبت کننده\",\"disabled\":\"\"},model:{value:(_vm.item.created_by.name),callback:function ($$v) {_vm.$set(_vm.item.created_by, \"name\", $$v)},expression:\"item.created_by.name\"}}):_vm._e()],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"12\"}},[_c('v-textarea',{attrs:{\"label\":\"توضیحات\",\"disabled\":this.id != undefined},model:{value:(_vm.item.explanation),callback:function ($$v) {_vm.$set(_vm.item, \"explanation\", $$v)},expression:\"item.explanation\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('div',{staticClass:\"mb-1 mr-1\"},[_vm._v(\"بارگیری ها\")]),_c('m-datatable',{attrs:{\"headers\":_vm.ladingHeaders,\"items\":_vm.ladings,\"show-select\":this.id == undefined,\"item-key\":\"id\",\"disable-pagination\":true,\"hide-default-footer\":true,\"show-export-btns\":false},scopedSlots:_vm._u([{key:\"item.tipPrice\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(_vm._f(\"toMoney\")(item.driver_tip_price)))]}},{key:\"item.carIncome\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.getCarIncome(item))))]}},{key:\"item.sum\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.getLadingSum(item))))]}},{key:\"item.cargoDebt\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.getCargoDebt(item))))]}}]),model:{value:(_vm.selectedLadings),callback:function ($$v) {_vm.selectedLadings=$$v},expression:\"selectedLadings\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('div',{staticClass:\"mb-1 mr-1\"},[_vm._v(\"تنخواه ها\")]),_c('m-datatable',{attrs:{\"headers\":_vm.imprestHeaders,\"items\":_vm.imprests,\"show-select\":this.id == undefined,\"item-key\":\"id\",\"disable-pagination\":true,\"hide-default-footer\":true,\"show-export-btns\":false},scopedSlots:_vm._u([{key:\"item.paidValue\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(_vm._f(\"toMoney\")(item.sanad.bed)))]}},{key:\"item.receivedValue\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.getImprestSettledValue(item))))]}},{key:\"item.remain\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.getImprestNotSettledValue(item))))]}}]),model:{value:(_vm.selectedImprests),callback:function ($$v) {_vm.selectedImprests=$$v},expression:\"selectedImprests\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-simple-table',{staticClass:\"sum-table\"},[_c('tbody',[_c('tr',[_c('td',[_vm._v(\"جمع انعام\")]),_c('td',{staticClass:\"ltr\"},[_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.tipsSum)))])]),_c('tr',[_c('td',[_vm._v(\"جمع درآمد ماشین\")]),_c('td',{staticClass:\"ltr\"},[_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.carIncomesSum)))])]),_c('tr',[_c('td',[_vm._v(\"جمع\")]),_c('td',{staticClass:\"ltr\"},[_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.ladingsSum)))])]),_c('tr',[_c('td',[_vm._v(\"مجموع بدهی باربری\")]),_c('td',{staticClass:\"ltr\"},[_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.cargoDebtsSum)))])]),_c('tr',[_c('td',[_vm._v(\"مجموع تنخواه\")]),_c('td',{staticClass:\"ltr\"},[_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.imprestsSum)))])]),_c('tr',[_c('td',{staticClass:\"text--bold\"},[_vm._v(\"مبلغ قابل پرداخت\")]),_c('td',{staticClass:\"ltr\"},[_vm._v(_vm._s(_vm._f(\"toMoney\")(_vm.payableValue)))])])])])],1),_c('v-dialog',{model:{value:(_vm.paymentDialog),callback:function ($$v) {_vm.paymentDialog=$$v},expression:\"paymentDialog\"}},[_c('transaction-form',{ref:\"transactionForm\",attrs:{\"transactionType\":\"payment\",\"modal-mode\":true,\"id\":_vm.payment.id},on:{\"submit\":_vm.validate}})],1)],1)]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <m-form\r\n    title=\"پرداخت رانندگان متفرقه\"\r\n    formName=\"پرداخت رانندگان متفرقه\"\r\n    :isEditing.sync=\"isEditing\"\r\n    :deletable=\"true\"\r\n    :showList=\"false\"\r\n    :showListBtn=\"false\"\r\n    :canDelete=\"canDelete\"\r\n    :canSubmit=\"canSubmit && !this.id\"\r\n    :confirmBtnText=\"confirmBtnText\"\r\n    :cancelConfirmBtnText=\"cancelConfirmBtnText\"\r\n    :canConfirm=\"canConfirm\"\r\n    :canCancelConfirm=\"canCancelConfirm\"\r\n    @cancelConfirm=\"cancelConfirm\"\r\n    @confirm=\"confirm\"\r\n    @goToForm=\"getItemByPosition\"\r\n    @submit=\"openPaymentDialog\"\r\n    @delete=\"deleteItem\"\r\n    @clearForm=\"clearForm()\"\r\n  >\r\n    <template #header-btns>\r\n      <v-btn\r\n        v-if=\"id\"\r\n        target=\"_blank\"\r\n        :to=\"{name:'TransactionForm', params: {transactionType: 'payment', id: item.payment.id}}\"\r\n        class=\"blue white--text mr-1\"\r\n      >\r\n        مشاهده دریافت\r\n        <v-chip class=\"app-background-color mr-2\" x-small>{{ item.payment.code }}</v-chip>\r\n      </v-btn>\r\n    </template>\r\n    <template>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"2\">\r\n          <v-text-field label=\"شماره\" v-model=\"item.code\" disabled />\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-autocomplete\r\n            label=\"حمل کننده\"\r\n            v-model=\"item.driving\"\r\n            :items=\"$store.state.drivings.filter(o => o.car.owner == 'o')\"\r\n            item-text=\"title\"\r\n            item-value=\"id\"\r\n            :disabled=\"this.id != undefined\"\r\n            @change=\"getDrivingData\"\r\n            :return-object=\"true\"\r\n          />\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" md=\"2\">\r\n          <date v-model=\"item.date\" label=\"تاریخ\" :default=\"true\" :disabled=\"this.id != undefined\" />\r\n        </v-col>\r\n\r\n        <v-col cols=\"2\">\r\n          <v-text-field\r\n            v-if=\"item.created_by\"\r\n            label=\"ثبت کننده\"\r\n            disabled\r\n            v-model=\"item.created_by.name\"\r\n          />\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"12\">\r\n          <v-textarea label=\"توضیحات\" v-model=\"item.explanation\" :disabled=\"this.id != undefined\"></v-textarea>\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\">\r\n          <div class=\"mb-1 mr-1\">بارگیری ها</div>\r\n          <m-datatable\r\n            :headers=\"ladingHeaders\"\r\n            :items=\"ladings\"\r\n            v-model=\"selectedLadings\"\r\n            :show-select=\"this.id == undefined\"\r\n            item-key=\"id\"\r\n            :disable-pagination=\"true\"\r\n            :hide-default-footer=\"true\"\r\n            :show-export-btns=\"false\"\r\n          >\r\n            <template #item.tipPrice=\"{ item }\">{{ item.driver_tip_price | toMoney}}</template>\r\n            <template #item.carIncome=\"{ item }\">{{ getCarIncome(item) | toMoney}}</template>\r\n            <template #item.sum=\"{ item }\">{{ getLadingSum(item) | toMoney }}</template>\r\n            <template #item.cargoDebt=\"{ item }\">{{ getCargoDebt(item) | toMoney }}</template>\r\n          </m-datatable>\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\">\r\n          <div class=\"mb-1 mr-1\">تنخواه ها</div>\r\n          <m-datatable\r\n            :headers=\"imprestHeaders\"\r\n            :items=\"imprests\"\r\n            v-model=\"selectedImprests\"\r\n            :show-select=\"this.id == undefined\"\r\n            item-key=\"id\"\r\n            :disable-pagination=\"true\"\r\n            :hide-default-footer=\"true\"\r\n            :show-export-btns=\"false\"\r\n          >\r\n            <template #item.paidValue=\"{ item }\">{{ item.sanad.bed | toMoney }}</template>\r\n            <template #item.receivedValue=\"{ item }\">{{ getImprestSettledValue(item) | toMoney }}</template>\r\n            <template #item.remain=\"{ item }\">{{ getImprestNotSettledValue(item) | toMoney}}</template>\r\n          </m-datatable>\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" md=\"4\">\r\n          <v-simple-table class=\"sum-table\">\r\n            <tbody>\r\n              <tr>\r\n                <td>جمع انعام</td>\r\n                <td class=\"ltr\">{{ tipsSum | toMoney }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>جمع درآمد ماشین</td>\r\n                <td class=\"ltr\">{{ carIncomesSum | toMoney }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>جمع</td>\r\n                <td class=\"ltr\">{{ ladingsSum | toMoney }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>مجموع بدهی باربری</td>\r\n                <td class=\"ltr\">{{ cargoDebtsSum | toMoney }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>مجموع تنخواه</td>\r\n                <td class=\"ltr\">{{ imprestsSum | toMoney }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td class=\"text--bold\">مبلغ قابل پرداخت</td>\r\n                <td class=\"ltr\">{{ payableValue | toMoney }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </v-simple-table>\r\n        </v-col>\r\n\r\n        <v-dialog v-model=\"paymentDialog\">\r\n          <transaction-form\r\n            transactionType=\"payment\"\r\n            :modal-mode=\"true\"\r\n            :id=\"payment.id\"\r\n            @submit=\"validate\"\r\n            ref=\"transactionForm\"\r\n          />\r\n        </v-dialog>\r\n      </v-row>\r\n    </template>\r\n  </m-form>\r\n</template>\r\n\r\n<script>\r\nimport formsMixin from \"@/mixin/forms\";\r\nimport money from \"@/components/mcomponents/cleave/Money\";\r\nimport date from \"@/components/mcomponents/cleave/Date\";\r\n\r\nimport GetApi from \"./GetApi\";\r\nimport LadingMixin from \"./LadingMixin\";\r\nimport { MFormMixin } from \"@bit/mmd-mostafaee.vue.m-form\";\r\n\r\nimport TransactionForm from \"@/views/panel/transaction/Form\";\r\n\r\nexport default {\r\n  name: \"DriverPaymentForm\",\r\n  mixins: [formsMixin, GetApi, MFormMixin, LadingMixin],\r\n  components: { TransactionForm },\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      baseUrl: \"dashtbashi/otherDriverPayments\",\r\n      leadingSlash: true,\r\n      permissionBasename: \"otherDriverPayment\",\r\n      hasList: false,\r\n      hasIdProp: true,\r\n      paymentDialog: false,\r\n      payment: {},\r\n      performClearForm: true,\r\n      ladingHeaders: [\r\n        {\r\n          text: \"شماره حواله\",\r\n          value: \"remittance.code\",\r\n        },\r\n        {\r\n          text: \"تاریخ بارگیری\",\r\n          value: \"lading_date\",\r\n        },\r\n        {\r\n          text: \"تاریخ بارنامه\",\r\n          value: \"bill_date\",\r\n        },\r\n        {\r\n          text: \"نام پیمانکار\",\r\n          value: \"contractor.name\",\r\n        },\r\n        {\r\n          text: \"انعام\",\r\n          value: \"tipPrice\",\r\n        },\r\n\r\n        {\r\n          text: \"درآمد ماشین\",\r\n          value: \"carIncome\",\r\n        },\r\n        {\r\n          text: \"بدهی باربری\",\r\n          value: \"cargoDebt\",\r\n        },\r\n      ],\r\n      ladings: [],\r\n      selectedLadings: [],\r\n      imprestHeaders: [\r\n        {\r\n          text: \"شماره\",\r\n          value: \"code\",\r\n        },\r\n        {\r\n          text: \"حساب\",\r\n          value: \"account.name\",\r\n        },\r\n        {\r\n          text: \"شناور\",\r\n          value: \"floatAccount.name\",\r\n        },\r\n        {\r\n          text: \"تاریخ\",\r\n          value: \"transaction.date\",\r\n        },\r\n        {\r\n          text: \"مبلغ پرداختی\",\r\n          value: \"paidValue\",\r\n        },\r\n        {\r\n          text: \"مبلغ دریافتی\",\r\n          value: \"receivedValue\",\r\n        },\r\n        {\r\n          text: \"مانده پرداخت نشده\",\r\n          value: \"remain\",\r\n        },\r\n      ],\r\n      imprests: [],\r\n      selectedImprests: [],\r\n    };\r\n  },\r\n  computed: {\r\n    tipsSum() {\r\n      return this.selectedLadings.reduce((v, o) => v + +o.driver_tip_price, 0);\r\n    },\r\n    carIncomesSum() {\r\n      return this.selectedLadings.reduce((v, o) => v + this.getCarIncome(o), 0);\r\n    },\r\n    ladingsSum() {\r\n      return this.selectedLadings.reduce((v, o) => v + this.getLadingSum(o), 0);\r\n    },\r\n    cargoDebtsSum() {\r\n      return this.selectedLadings.reduce((v, o) => v + this.getCargoDebt(o), 0);\r\n    },\r\n    imprestsSum() {\r\n      return this.selectedImprests.reduce(\r\n        (v, o) => v + +this.getImprestNotSettledValue(o),\r\n        0\r\n      );\r\n    },\r\n    payableValue() {\r\n      return this.ladingsSum - this.cargoDebtsSum - this.imprestsSum;\r\n    },\r\n  },\r\n  methods: {\r\n    getImprestSettledValue(imprest) {\r\n      return imprest.imprestSettlements.reduce(\r\n        (v, o) => v + +o.settled_value,\r\n        0\r\n      );\r\n    },\r\n    getImprestNotSettledValue(imprest) {\r\n      return imprest.sanad.bed - this.getImprestSettledValue(imprest);\r\n    },\r\n    getData() {\r\n      this.getDrivings(false, (data) => {\r\n        let drivingId = this.urlQuery[\"item.driving\"];\r\n        if (drivingId) {\r\n          this.item.driving = data.filter((o) => o.id == drivingId)[0];\r\n          this.getDrivingData(this.item.driving);\r\n        }\r\n      });\r\n    },\r\n    openPaymentDialog(clearForm = true) {\r\n      this.performClearForm = clearForm;\r\n      this.paymentDialog = true;\r\n      this.$nextTick(() => {\r\n        this.$refs.transactionForm.setDefaults({\r\n          \"rows.0.value\": this.payableValue,\r\n        });\r\n      });\r\n    },\r\n    getDrivingData(driving) {\r\n      this.selectedLadings = [];\r\n      this.selectedImprests = [];\r\n      this.getDrivingLadings(driving);\r\n      this.getDriverNotSettledImprests(driving);\r\n    },\r\n    getDrivingLadings(driving, callback = null) {\r\n      this.request({\r\n        url: this.endpoint(\"dashtbashi/ladings/\"),\r\n        method: \"get\",\r\n        params: {\r\n          driving: driving.id,\r\n          is_paid: false,\r\n        },\r\n        success: (data) => {\r\n          this.ladings = data;\r\n          if (this.item.remittance) {\r\n            this.selectedLadings = this.ladings.filter(\r\n              (o) =>\r\n                o.remittance &&\r\n                o.remittance.id == this.item.remittance &&\r\n                this.item.selectedLadings.includes(String(o.id))\r\n            );\r\n          }\r\n          callback && callback(data);\r\n        },\r\n      });\r\n    },\r\n    validate(payment) {\r\n      this.payment = payment;\r\n\r\n      let payment_sum = payment.items.items.reduce((v, o) => v + +o.value, 0);\r\n\r\n      if (payment_sum != this.payableValue) {\r\n        this.notify(\r\n          \"مبلغ پرداختی باید با مبلغ قابل پرداخت برابر باشد\",\r\n          \"danger\"\r\n        );\r\n      } else {\r\n        this.paymentDialog = false;\r\n      }\r\n\r\n      this.submit(this.performClearForm);\r\n    },\r\n\r\n    getDriverNotSettledImprests(driving, callback = null) {\r\n      this.request({\r\n        url: this.endpoint(\"imprests/notSettledImprests\"),\r\n        params: {\r\n          account: driving.car.payableAccount,\r\n          floatAccount: driving.driver.floatAccount,\r\n        },\r\n        method: \"get\",\r\n        success: (data) => {\r\n          this.imprests = data;\r\n          if (this.item.remittance) {\r\n            this.selectedImprests = this.imprests;\r\n          }\r\n          callback && callback(data);\r\n        },\r\n      });\r\n    },\r\n    getItemTemplate() {\r\n      return {\r\n        ladings: [],\r\n        imprests: [],\r\n      };\r\n    },\r\n    getRowTemplate() {\r\n      return {\r\n        tax_percent: this.getOptionValue(\"taxPercent\"),\r\n      };\r\n    },\r\n    getItemByPosition(position) {\r\n      return this.request({\r\n        url: this.endpoint(\"dashtbashi/otherDriverPayments/byPosition\"),\r\n        method: \"get\",\r\n        params: {\r\n          id: this.id,\r\n          position: position,\r\n        },\r\n        success: (data) => {\r\n          this.setItem(data);\r\n        },\r\n      });\r\n    },\r\n    setItem(item) {\r\n      this.changeRouteTo(item.id);\r\n      this.isEditing = false;\r\n      this.item = item;\r\n      this.payment = item.payment;\r\n\r\n      this.ladings = item.ladings;\r\n      this.imprests = item.imprests;\r\n\r\n      this.selectedLadings = item.ladings;\r\n      this.selectedImprests = item.imprests;\r\n    },\r\n    deleteRow(index) {\r\n      if (index == -1) {\r\n        this.rows.forEach((row) => {\r\n          if (row.id) this.itemsToDelete.push(row.id);\r\n        });\r\n        this.rows.splice(0, this.rows.length - 1);\r\n      } else {\r\n        let row = this.rows[index];\r\n        if (row.id) this.itemsToDelete.push(row.id);\r\n        this.rows.splice(index, 1);\r\n      }\r\n    },\r\n    getSerialized() {\r\n      let data = {\r\n        item: this.extractIds(this.item),\r\n        payment: this.extractIds(this.payment),\r\n      };\r\n\r\n      data.item.ladings = this.selectedLadings.map((o) => o.id);\r\n      data.item.imprests = this.selectedImprests.map((o) => o.id);\r\n\r\n      data.payment.account = this.item.driving.car.payableAccount;\r\n      data.payment.floatAccount = this.item.driving.driver.floatAccount;\r\n\r\n      return data;\r\n    },\r\n\r\n    clearForm() {\r\n      this.isEditing = true;\r\n      this.item = this.getItemTemplate();\r\n      this.selectedLadings = [];\r\n      this.selectedImprests = [];\r\n      this.ladings = [];\r\n      this.imprests = [];\r\n      this.changeRouteTo(null);\r\n      this.see;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.sum-table {\r\n  td:first-child {\r\n    text-align: right !important;\r\n  }\r\n  td:last-child {\r\n    text-align: left !important;\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtherDriverPayment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OtherDriverPayment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OtherDriverPayment.vue?vue&type=template&id=ad0f8eaa&scoped=true&\"\nimport script from \"./OtherDriverPayment.vue?vue&type=script&lang=js&\"\nexport * from \"./OtherDriverPayment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OtherDriverPayment.vue?vue&type=style&index=0&id=ad0f8eaa&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ad0f8eaa\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VAutocomplete,VBtn,VChip,VCol,VDialog,VRow,VSimpleTable,VTextField,VTextarea})\n","export default {\r\n  data() {\r\n    return {\r\n      months: [{\r\n          text: \"فروردین\",\r\n          value: 1,\r\n        },\r\n        {\r\n          text: \"اردیبهشت\",\r\n          value: 2,\r\n        },\r\n        {\r\n          text: \"خرداد\",\r\n          value: 3,\r\n        },\r\n        {\r\n          text: \"تیر\",\r\n          value: 4,\r\n        },\r\n        {\r\n          text: \"مرداد\",\r\n          value: 5,\r\n        },\r\n        {\r\n          text: \"شهریور\",\r\n          value: 6,\r\n        },\r\n        {\r\n          text: \"مهر\",\r\n          value: 7,\r\n        },\r\n        {\r\n          text: \"آبان\",\r\n          value: 8,\r\n        },\r\n        {\r\n          text: \"آذر\",\r\n          value: 9,\r\n        },\r\n        {\r\n          text: \"دی\",\r\n          value: 10,\r\n        },\r\n        {\r\n          text: \"بهمن\",\r\n          value: 11,\r\n        },\r\n        {\r\n          text: \"اسفند\",\r\n          value: 12,\r\n        },\r\n      ],\r\n\r\n      tipPayers: [{\r\n          title: \"شرکت\",\r\n          id: \"cmp\"\r\n        },\r\n        {\r\n          title: \"پیمانکار\",\r\n          id: \"cnt\"\r\n        }\r\n      ],\r\n      remittancePaymentMethods: [{\r\n          text: \"کمیسیون و کرایه به شرکت\",\r\n          value: \"tc\"\r\n        },\r\n        {\r\n          text: \"کمیسیون به شرکت و کرایه به راننده\",\r\n          value: \"tcd\"\r\n        },\r\n        {\r\n          text: \"کمیسیون و کرایه با شرکت\",\r\n          value: \"cp\"\r\n        }\r\n      ],\r\n      receiveTypes: [{\r\n          text: \"نسیه\",\r\n          value: \"cr\"\r\n        },\r\n        {\r\n          text: \"نقدی\",\r\n          value: \"cs\"\r\n        },\r\n        {\r\n          text: \"کارت خوان\",\r\n          value: \"p\"\r\n        },\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    getDrivers(force, callback = null) {\r\n      if (!force && this.$store.state.drivers.length) return;\r\n      return this.request({\r\n        url: this.endpoint(\"dashtbashi/drivers/\"),\r\n        method: \"get\",\r\n        success: data => {\r\n          this.$store.commit(\"setDrivers\", data);\r\n          callback && callback(data);\r\n        }\r\n      });\r\n    },\r\n    getCars(force) {\r\n      if (!force && this.$store.state.cars.length) return;\r\n      return this.request({\r\n        url: this.endpoint('dashtbashi/cars/'),\r\n        method: 'get',\r\n        success: data => {\r\n          this.$store.commit('setCars', data);\r\n        }\r\n      })\r\n    },\r\n    getDrivings(force, callback = null) {\r\n      if (!force && this.$store.state.drivings.length) {\r\n        callback && callback(this.$store.state.drivings);\r\n        return;\r\n      };\r\n      return this.request({\r\n        url: this.endpoint(\"dashtbashi/drivings/\"),\r\n        method: \"get\",\r\n        success: data => {\r\n          this.$store.commit(\"setDrivings\", data);\r\n          callback && callback(data);\r\n        }\r\n      });\r\n    },\r\n    getAssociations(force) {\r\n      if (!force && this.$store.state.associations.length) return;\r\n      return this.request({\r\n        url: this.endpoint(\"dashtbashi/associations/\"),\r\n        method: \"get\",\r\n        success: data => {\r\n          this.$store.commit(\"setAssociations\", data);\r\n        }\r\n      });\r\n    },\r\n    getRemittances(code) {\r\n      this.request({\r\n        url: this.endpoint(\"dashtbashi/remittances/?limit=10&offset=0\"),\r\n        method: \"get\",\r\n        params: {\r\n          code__icontains: code\r\n        },\r\n        success: data => {\r\n          this.remittances = data[\"results\"].map(o => {\r\n            o.code = String(o.code)\r\n            return o;\r\n          });\r\n        }\r\n      });\r\n    }\r\n  },\r\n}"],"sourceRoot":""}