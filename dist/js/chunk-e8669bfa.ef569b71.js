(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8669bfa"],{4633:function(t,e,a){"use strict";var s=a("ae79");e["a"]={components:{OpenSanadBtn:s["a"]},data:function(){return{editable:!1}},created:function(){this.setEditable()},watch:{id:function(){this.setEditable()}},methods:{setEditable:function(){this.id?this.editable=!1:this.editable=!0},makeFormEditable:function(){this.editable=!0},makeFormUneditable:function(){this.editable=!1}}}},cb74:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("m-form",{attrs:{title:"سند حسابداری",showList:!1,listRoute:{name:"List",params:{form:"sanad"}},exportParams:{id:this.id},canEdit:t.canEdit,canDelete:!1,canSubmit:t.canSubmit,isEditing:t.isEditing,confirmBtnText:t.confirmBtnText,cancelConfirmBtnText:t.cancelConfirmBtnText,canConfirm:t.canConfirm,canCancelConfirm:t.canCancelConfirm},on:{"update:isEditing":function(e){t.isEditing=e},"update:is-editing":function(e){t.isEditing=e},cancelConfirm:t.cancelConfirm,confirm:t.confirm,goToForm:t.getItemByPosition,submit:t.submit,delete:t.deleteItem,clearForm:function(e){return t.clearForm()}},scopedSlots:t._u([{key:"header-btns",fn:function(){return[t.item.factor?a("v-btn",{staticClass:"light-blue white--text mr-1",attrs:{small:"",to:{name:"FactorForm",params:{type:t.item.factor.type,id:t.item.factor.id}}}},[t._v("مشاهده فاکتور این سند")]):t._e(),t.item.transaction?a("v-btn",{staticClass:"light-blue white--text mr-1",attrs:{small:"",to:{name:"TransactionForm",params:{transactionType:t.item.transaction.type,id:t.item.transaction.id}}}},[a("span",[t._v("مشاهده دریافت/پرداخت")])]):t._e(),a("v-btn",{staticClass:"teal white--text mr-1",attrs:{small:""},on:{click:t.copySanadToNewSanad}},[t._v("کپی سند به سند جدید")]),a("v-btn",{staticClass:"teal white--text mr-1",attrs:{small:""},on:{click:t.reorderSanads}},[t._v("مرتب کردن کد اسناد بر اساس تاریخ")])]},proxy:!0}])},[[a("v-row",[a("v-col",{attrs:{cols:"12",lg:"6"}},[a("v-row",[a("v-col",{attrs:{cols:"12",lg:"3"}},[a("v-text-field",{attrs:{disabled:"",label:"عطف","background-color":"white"},model:{value:t.item.id,callback:function(e){t.$set(t.item,"id",e)},expression:"item.id"}})],1),a("v-col",{attrs:{cols:"12",lg:"3"}},[a("v-text-field",{attrs:{disabled:"",label:"شماره سند","background-color":"white"},model:{value:t.item.code,callback:function(e){t.$set(t.item,"code",e)},expression:"item.code"}})],1),a("v-col",{attrs:{cols:"12",lg:"6"}},[a("date",{staticClass:"form-control",attrs:{label:" * تاریخ سند",default:!0,disabled:!t.isEditing},model:{value:t.item.date,callback:function(e){t.$set(t.item,"date",e)},expression:"item.date"}})],1),a("v-col",{attrs:{cols:"12",lg:"12"}},[t.item.created_by?a("v-text-field",{attrs:{label:"ثبت کننده",disabled:""},model:{value:t.item.created_by.name,callback:function(e){t.$set(t.item.created_by,"name",e)},expression:"item.created_by.name"}}):t._e()],1)],1)],1),a("v-col",{attrs:{cols:"12",lg:"6"}},[a("v-row",[a("v-col",{attrs:{cols:"12",lg:"12"}},[a("v-textarea",{attrs:{label:"شرح سند",disabled:!t.isEditing,height:"105"},model:{value:t.item.explanation,callback:function(e){t.$set(t.item,"explanation",e)},expression:"item.explanation"}})],1)],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-simple-table",{staticClass:"form-items"},[a("thead",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("* شماره - نام حساب")]),a("th",[t._v("توضیحات ردیف")]),a("th",[t._v("بدهکار")]),a("th",{staticClass:"d-print-none"},[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.exchangeValue()}}},[a("i",{staticClass:"fas fa-exchange-alt"})])]),a("th",[t._v("بستانکار")])])]),a("tbody",[t._l(t.rows,(function(e,s){return a("tr",{key:s,class:{"d-print-none":s==t.rows.length-1}},[a("td",{staticClass:"tr-counter"},[t._v(t._s(s+1))]),a("td",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.accountParentsName(e.account).join(" > "),expression:"accountParentsName(row.account).join(' > ')"}]},[a("account-select",{attrs:{horizontal:!0,"items-type":"level3",disabled:!t.isEditing,floatAccount:t.rows[s].floatAccount,costCenter:t.rows[s].costCenter},on:{"update:floatAccount":function(e){return t.rows[s].floatAccount=e},"update:costCenter":function(e){return t.rows[s].costCenter=e}},model:{value:t.rows[s].account,callback:function(e){t.$set(t.rows[s],"account",e)},expression:"rows[i].account"}})],1),a("td",[a("v-textarea",{attrs:{disabled:!t.isEditing,rows:"1","auto-grow":""},model:{value:t.rows[s].explanation,callback:function(e){t.$set(t.rows[s],"explanation",e)},expression:"rows[i].explanation"}})],1),a("td",{staticStyle:{width:"150px"}},[a("money",{staticClass:"form-control",attrs:{disabled:!t.isEditing||0!=t.rows[s].bes},model:{value:t.rows[s].bed,callback:function(e){t.$set(t.rows[s],"bed",e)},expression:"rows[i].bed"}})],1),a("td",{staticClass:"d-print-none"},[s!=t.rows.length-1?a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.exchangeValue(t.rows[s])}}},[a("i",{staticClass:"fas fa-exchange-alt"})]):t._e()]),a("td",{staticStyle:{width:"150px"}},[a("money",{staticClass:"form-control",attrs:{disabled:!t.isEditing||0!=t.rows[s].bed},model:{value:t.rows[s].bes,callback:function(e){t.$set(t.rows[s],"bes",e)},expression:"rows[i].bes"}})],1),a("td",{staticClass:"d-print-none"},[s!=t.rows.length-1?a("v-btn",{staticClass:"red--text",attrs:{icon:"",disabled:!t.isEditing},on:{click:function(e){return t.deleteRow(s)}}},[a("v-icon",[t._v("delete")])],1):t._e()],1)])})),a("tr",{staticClass:"grey lighten-3 text-white"},[a("td",{attrs:{colspan:"2"}},[t.bedSum!=t.besSum?a("span",[t._v("اختلاف: "+t._s(t._f("toMoney")(Math.abs(t.bedSum-t.besSum)))+" "+t._s(t.bedSum>t.besSum?"بستانکار":"بدهکار"))]):t._e()]),a("td",{staticClass:"text-left"},[t._v("مجموع:")]),a("td",{},[t._v(t._s(t._f("toMoney")(t.bedSum)))]),a("td",{staticClass:"d-print-none"}),a("td",{},[t._v(t._s(t._f("toMoney")(t.besSum)))]),a("td",{staticClass:"d-print-none"},[a("v-btn",{staticClass:"red--text",attrs:{icon:"",disabled:!t.isEditing},on:{click:function(e){return t.deleteRow(-1)}}},[a("v-icon",[t._v("delete_sweep")])],1)],1)])],2)])],1)],1)]],2)},i=[],n=(a("4160"),a("159b"),a("b85c")),o=a("5530"),r=a("a49f"),c=a("4633"),l=a("3c1f"),d=a("0359"),u=a("da4b"),m={name:"Form",components:{money:l["a"],date:d["a"]},mixins:[c["a"],r["a"],u["b"]],props:["id"],data:function(){return{baseUrl:"sanads",permissionBasename:"sanad",leadingSlash:!0,hasList:!1,hasIdProp:!0,rowKey:"account"}},computed:{canEdit:function(){return!this.item.id||!this.item.is_auto_created},bedSum:function(){var t=0;return this.rows.forEach((function(e){e.bed&&(t+=+e.bed)})),t},besSum:function(){var t=0;return this.rows.forEach((function(e){e.bes&&(t+=+e.bes)})),t}},methods:{getItemTemplate:function(){return{type:"temporary"}},getRowTemplate:function(){return{bed:0,bes:0}},getSanadByCode:function(t){var e=this;return this.log("Get sanad by code: ",t),this.request({url:this.endpoint("sanads/getSanadByCode"),method:"get",params:{code:t},success:function(t){e.selectSanad(t)}})},setItem:function(t){var e=this;this.item=t,this.itemsToDelete=[],this.rows=[],t.items.forEach((function(t){var a=Object(o["a"])({},t);e.rows.push(a)})),this.rows.push(this.getRowTemplate()),this.changeRouteTo(t.id),this.isEditing=!1},copySanadToNewSanad:function(){var t=this,e=this.copy(this.rows);this.clearForm(),this.$nextTick((function(){t.rows=[];var a,s=Object(n["a"])(e);try{for(s.s();!(a=s.n()).done;){var i=a.value;i.id&&delete i.id,t.rows.push(Object(o["a"])({},i))}}catch(r){s.e(r)}finally{s.f()}}))},exchangeValue:function(t){if(t){var e=t.bed;t.bed=t.bes,t.bes=e}else{var a,s=Object(n["a"])(this.rows);try{for(s.s();!(a=s.n()).done;){var i=a.value,o=i.bed;i.bed=i.bes,i.bes=o}}catch(r){s.e(r)}finally{s.f()}}},getSerialized:function(){var t=this,e={item:this.extractIds(this.item),items:{ids_to_delete:this.itemsToDelete,items:[]}};return this.rows.forEach((function(a,s){if(s!=t.rows.length-1){var i=t.copy(a);i=t.extractIds(i),i.bed=+i.bed,i.bes=+i.bes,e.items.items.push(i)}})),e},reorderSanads:function(){var t=this;this.request({url:this.endpoint("sanads/reorder"),method:"post",success:function(e){t.successNotify()}})}}},f=m,b=a("2877"),h=a("6544"),p=a.n(h),v=a("8336"),w=a("62ad"),g=a("132d"),x=a("0fd9"),_=a("1f4f"),y=a("8654"),C=a("a844"),S=Object(b["a"])(f,s,i,!1,null,"78f04edc",null);e["default"]=S.exports;p()(S,{VBtn:v["a"],VCol:w["a"],VIcon:g["a"],VRow:x["a"],VSimpleTable:_["a"],VTextField:y["a"],VTextarea:C["a"]})}}]);
//# sourceMappingURL=chunk-e8669bfa.ef569b71.js.map