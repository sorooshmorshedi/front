{"version":3,"sources":["webpack:///./src/modules/distribution/DistributionForm.vue?f34e","webpack:///./src/components/selects/TreeSelect.vue?5e8e","webpack:///src/components/selects/TreeSelect.vue","webpack:///./src/components/selects/TreeSelect.vue?edb1","webpack:///./src/components/selects/TreeSelect.vue","webpack:///src/modules/distribution/DistributionForm.vue","webpack:///./src/modules/distribution/DistributionForm.vue?deda","webpack:///./src/modules/distribution/DistributionForm.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","name","id","canSubmit","isEditing","confirmBtnText","cancelConfirmBtnText","canConfirm","canCancelConfirm","on","$event","cancelConfirm","confirm","getItemByPosition","submit","deleteItem","clearForm","scopedSlots","_u","key","fn","proxy","model","value","item","callback","$$v","$set","expression","cars","created_by","_e","paths","PathLevels","filters","path__in","visitors","VisitorLevels","visitor__in","ref","headers","factors","staticRenderFns","_l","n","i","class","selectedLevels","length","getTitle","getItems","levelText","emit","props","levelsCount","require","items","labels","itemText","default","itemsIn","data","created","push","computed","nodes","buildTree","methods","map","roots","level","parents","clearSelectedLevels","j","selected_items","o","code","startsWith","parent","$emit","getItemText","component","VAutocomplete","VCol","VRow","mixins","components","baseUrl","permissionBasename","appendSlash","hasList","hasIdProp","type","is_definite","is_loaded","getItemTemplate","request","url","endpoint","method","params","position","success","getData","getCars","getVisitors","getPaths","setItem","changeRouteTo","copy","getSerialized","VTextField","VTextarea"],"mappings":"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","file":"js/chunk-2d21f2c6.a6b7a33e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('m-form',{attrs:{\"title\":\"تحویل فاکتور ها جهت توزیع\",\"showList\":false,\"listRoute\":{name:'DistributionsList'},\"exportBaseUrl\":\"reports/lists/distributions\",\"exportParams\":{id: this.id},\"canDelete\":false,\"canSubmit\":_vm.canSubmit,\"isEditing\":_vm.isEditing,\"confirmBtnText\":_vm.confirmBtnText,\"cancelConfirmBtnText\":_vm.cancelConfirmBtnText,\"canConfirm\":_vm.canConfirm,\"canCancelConfirm\":_vm.canCancelConfirm},on:{\"update:isEditing\":function($event){_vm.isEditing=$event},\"update:is-editing\":function($event){_vm.isEditing=$event},\"cancelConfirm\":_vm.cancelConfirm,\"confirm\":_vm.confirm,\"goToForm\":_vm.getItemByPosition,\"submit\":_vm.submit,\"delete\":_vm.deleteItem,\"clearForm\":function($event){return _vm.clearForm()}},scopedSlots:_vm._u([{key:\"header-btns\",fn:function(){return undefined},proxy:true}])},[[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"2\"}},[_c('v-text-field',{attrs:{\"disabled\":\"\",\"label\":\"عطف\",\"background-color\":\"white\"},model:{value:(_vm.item.local_id),callback:function ($$v) {_vm.$set(_vm.item, \"local_id\", $$v)},expression:\"item.local_id\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"2\"}},[_c('v-text-field',{attrs:{\"disabled\":\"\",\"label\":\"شماره\",\"background-color\":\"white\"},model:{value:(_vm.item.code),callback:function ($$v) {_vm.$set(_vm.item, \"code\", $$v)},expression:\"item.code\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"2\"}},[_c('date',{attrs:{\"label\":\" * تاریخ \",\"default\":true,\"disabled\":!_vm.isEditing},model:{value:(_vm.item.date),callback:function ($$v) {_vm.$set(_vm.item, \"date\", $$v)},expression:\"item.date\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"2\"}},[_c('mtime',{attrs:{\"label\":\" * ساعت\",\"default\":true,\"disabled\":!_vm.isEditing},model:{value:(_vm.item.time),callback:function ($$v) {_vm.$set(_vm.item, \"time\", $$v)},expression:\"item.time\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-autocomplete',{attrs:{\"label\":\"* ماشین\",\"items\":_vm.cars,\"item-text\":\"car_number\",\"item-value\":\"id\",\"disabled\":!_vm.isEditing},model:{value:(_vm.item.car),callback:function ($$v) {_vm.$set(_vm.item, \"car\", $$v)},expression:\"item.car\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"8\"}},[_c('v-textarea',{attrs:{\"label\":\"توضیحات\",\"disabled\":!_vm.isEditing},model:{value:(_vm.item.explanation),callback:function ($$v) {_vm.$set(_vm.item, \"explanation\", $$v)},expression:\"item.explanation\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[(_vm.item.created_by)?_c('v-text-field',{attrs:{\"label\":\"کاربر\",\"disabled\":\"\"},model:{value:(_vm.item.created_by.name),callback:function ($$v) {_vm.$set(_vm.item.created_by, \"name\", $$v)},expression:\"item.created_by.name\"}}):_vm._e()],1),(_vm.isEditing)?[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('tree-select',{attrs:{\"levelsCount\":5,\"items\":_vm.paths,\"labels\":_vm.PathLevels,\"itemsIn\":_vm.filters.path__in,\"item-text\":\"name\"},on:{\"update:itemsIn\":function($event){return _vm.$set(_vm.filters, \"path__in\", $event)},\"update:items-in\":function($event){return _vm.$set(_vm.filters, \"path__in\", $event)}}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('tree-select',{attrs:{\"levelsCount\":4,\"items\":_vm.visitors,\"labels\":_vm.VisitorLevels,\"itemsIn\":_vm.filters.visitor__in,\"item-text\":\"user.name\"},on:{\"update:itemsIn\":function($event){return _vm.$set(_vm.filters, \"visitor__in\", $event)},\"update:items-in\":function($event){return _vm.$set(_vm.filters, \"visitor__in\", $event)}}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('m-datatable',{ref:\"datatable\",attrs:{\"headers\":_vm.headers,\"filters\":_vm.filters,\"showExportBtns\":false,\"apiUrl\":\"reports/lists/factors\"},on:{\"update:filters\":function($event){_vm.filters=$event}},model:{value:(_vm.factors),callback:function ($$v) {_vm.factors=$$v},expression:\"factors\"}})],1)]:_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('m-datatable',{ref:\"datatable\",attrs:{\"headers\":_vm.headers,\"filters\":_vm.filters,\"showExportBtns\":false,\"items\":_vm.item.factors},on:{\"update:filters\":function($event){_vm.filters=$event}},model:{value:(_vm.factors),callback:function ($$v) {_vm.factors=$$v},expression:\"factors\"}})],1)],2)]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"no-gutters\":\"\"}},_vm._l((_vm.levelsCount),function(n,i){return _c('v-col',{key:i,class:i != 0?'pr-3':'pr-0'},[(i == 0 || (_vm.selectedLevels[i-1] && _vm.selectedLevels[i-1].length))?_c('v-autocomplete',{attrs:{\"label\":_vm.getTitle(i),\"items\":_vm.getItems(i),\"item-text\":_vm.levelText,\"item-value\":\"id\",\"multiple\":true,\"clearable\":true,\"small-chips\":true,\"deletable-chips\":true,\"return-object\":true},on:{\"input\":function($event){return _vm.emit(i)},\"click:clear\":function($event){return _vm.emit(i)}},model:{value:(_vm.selectedLevels[i]),callback:function ($$v) {_vm.$set(_vm.selectedLevels, i, $$v)},expression:\"selectedLevels[i]\"}}):_vm._e()],1)}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-row no-gutters>\r\n    <v-col v-for=\"(n, i) in levelsCount\" :key=\"i\" :class=\"i != 0?'pr-3':'pr-0'\">\r\n      <v-autocomplete\r\n        v-if=\"i == 0 || (selectedLevels[i-1] && selectedLevels[i-1].length)\"\r\n        :label=\"getTitle(i)\"\r\n        :items=\"getItems(i)\"\r\n        v-model=\"selectedLevels[i]\"\r\n        :item-text=\"levelText\"\r\n        item-value=\"id\"\r\n        :multiple=\"true\"\r\n        :clearable=\"true\"\r\n        :small-chips=\"true\"\r\n        :deletable-chips=\"true\"\r\n        :return-object=\"true\"\r\n        @input=\"emit(i)\"\r\n        @click:clear=\"emit(i)\"\r\n      />\r\n    </v-col>\r\n  </v-row>\r\n</template>\r\n\r\n<script>\r\nimport { getText } from \"@/variables\";\r\n\r\nexport default {\r\n  name: \"TreeSelect\",\r\n  props: {\r\n    levelsCount: {\r\n      require: true,\r\n    },\r\n    items: {\r\n      require: true,\r\n    },\r\n    labels: {\r\n      require: true,\r\n    },\r\n    itemText: {\r\n      default: \"text\",\r\n    },\r\n    itemsIn: {},\r\n  },\r\n  data() {\r\n    return {\r\n      selectedLevels: [],\r\n    };\r\n  },\r\n  created() {\r\n    let selectedLevels = [];\r\n    for (let i = 0; i < this.levelsCount; i++) {\r\n      selectedLevels.push([]);\r\n    }\r\n    this.$set(this, \"selectedLevels\", selectedLevels);\r\n  },\r\n  computed: {\r\n    nodes() {\r\n      return this.buildTree(this.items);\r\n    },\r\n    levelText() {\r\n      return \"title\";\r\n    },\r\n  },\r\n  methods: {\r\n    buildTree(items) {\r\n      let nodes = this.copy(items);\r\n\r\n      nodes = nodes.map((o) => {\r\n        return { children: [], title: this.getItemText(o), ...o };\r\n      });\r\n\r\n      for (let node of nodes) {\r\n        let parent = nodes.find((o) => o.id == node.parent);\r\n        if (parent) {\r\n          node.title = `${this.getItemText(node)} > ${this.getItemText(node)}`;\r\n          parent.children.push(node);\r\n        }\r\n      }\r\n\r\n      let roots = nodes.filter((o) => !o.parent);\r\n      return roots;\r\n    },\r\n    getTitle(level) {\r\n      return getText(this.labels, level);\r\n    },\r\n    getItems(level) {\r\n      if (level == 0) {\r\n        return this.nodes;\r\n      }\r\n\r\n      let items = [];\r\n      let parents = this.selectedLevels[level - 1];\r\n      if (parents) {\r\n        for (let parent of this.selectedLevels[level - 1]) {\r\n          items.push(...parent.children);\r\n        }\r\n      }\r\n\r\n      return items;\r\n    },\r\n    clearSelectedLevels(i) {\r\n      for (let j = i + 1; j < this.levelsCount; j++) {\r\n        this.selectedLevels[j] = null;\r\n      }\r\n    },\r\n    emit(level) {\r\n      this.clearSelectedLevels(level);\r\n\r\n      let selected_items = [];\r\n      if (level == this.levelsCount - 1) {\r\n        selected_items = this.selectedLevels[level];\r\n      } else {\r\n        let parents = this.selectedLevels[level];\r\n        selected_items = this.items\r\n          .filter((o) => o.level == this.levelsCount - 1)\r\n          .filter((o) => {\r\n            for (let parent of parents) {\r\n              if (o.code.startsWith(parent.code)) {\r\n                return true;\r\n              }\r\n            }\r\n            return false;\r\n          });\r\n      }\r\n      this.$emit(\"update:itemsIn\", selected_items.map((o) => o.id).join(\",\"));\r\n    },\r\n    getItemText(item) {\r\n      let value = this.itemText.split(\".\").reduce((o, i) => {\r\n        if (o) return o[i];\r\n        return null;\r\n      }, item);\r\n\r\n      return value;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TreeSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TreeSelect.vue?vue&type=template&id=3fc1fa33&\"\nimport script from \"./TreeSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./TreeSelect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAutocomplete,VCol,VRow})\n","<template>\r\n  <m-form\r\n    title=\"تحویل فاکتور ها جهت توزیع\"\r\n    :showList=\"false\"\r\n    :listRoute=\"{name:'DistributionsList'}\"\r\n    exportBaseUrl=\"reports/lists/distributions\"\r\n    :exportParams=\"{id: this.id}\"\r\n    :canDelete=\"false\"\r\n    :canSubmit=\"canSubmit\"\r\n    :isEditing.sync=\"isEditing\"\r\n    :confirmBtnText=\"confirmBtnText\"\r\n    :cancelConfirmBtnText=\"cancelConfirmBtnText\"\r\n    :canConfirm=\"canConfirm\"\r\n    :canCancelConfirm=\"canCancelConfirm\"\r\n    @cancelConfirm=\"cancelConfirm\"\r\n    @confirm=\"confirm\"\r\n    @goToForm=\"getItemByPosition\"\r\n    @submit=\"submit\"\r\n    @delete=\"deleteItem\"\r\n    @clearForm=\"clearForm()\"\r\n  >\r\n    <template #header-btns></template>\r\n\r\n    <template>\r\n      <v-row>\r\n        <v-col cols=\"12\" md=\"2\">\r\n          <v-text-field disabled label=\"عطف\" v-model=\"item.local_id\" background-color=\"white\" />\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"2\">\r\n          <v-text-field disabled label=\"شماره\" v-model=\"item.code\" background-color=\"white\" />\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"2\">\r\n          <date v-model=\"item.date\" label=\" * تاریخ \" :default=\"true\" :disabled=\"!isEditing\" />\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" md=\"2\">\r\n          <mtime label=\" * ساعت\" v-model=\"item.time\" :default=\"true\" :disabled=\"!isEditing\" />\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" md=\"4\">\r\n          <v-autocomplete\r\n            label=\"* ماشین\"\r\n            :items=\"cars\"\r\n            v-model=\"item.car\"\r\n            item-text=\"car_number\"\r\n            item-value=\"id\"\r\n            :disabled=\"!isEditing\"\r\n          />\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" md=\"8\">\r\n          <v-textarea label=\"توضیحات\" v-model=\"item.explanation\" :disabled=\"!isEditing\"></v-textarea>\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" md=\"4\">\r\n          <v-text-field\r\n            v-if=\"item.created_by\"\r\n            label=\"کاربر\"\r\n            disabled\r\n            v-model=\"item.created_by.name\"\r\n          />\r\n        </v-col>\r\n\r\n        <template v-if=\"isEditing\">\r\n          <v-col cols=\"12\">\r\n            <tree-select\r\n              :levelsCount=\"5\"\r\n              :items=\"paths\"\r\n              :labels=\"PathLevels\"\r\n              :itemsIn.sync=\"filters.path__in\"\r\n              item-text=\"name\"\r\n            />\r\n          </v-col>\r\n          <v-col cols=\"12\">\r\n            <tree-select\r\n              :levelsCount=\"4\"\r\n              :items=\"visitors\"\r\n              :labels=\"VisitorLevels\"\r\n              :itemsIn.sync=\"filters.visitor__in\"\r\n              item-text=\"user.name\"\r\n            />\r\n          </v-col>\r\n          <v-col cols=\"12\">\r\n            <m-datatable\r\n              :headers=\"headers\"\r\n              :filters.sync=\"filters\"\r\n              v-model=\"factors\"\r\n              :showExportBtns=\"false\"\r\n              apiUrl=\"reports/lists/factors\"\r\n              ref=\"datatable\"\r\n            ></m-datatable>\r\n          </v-col>\r\n        </template>\r\n\r\n        <v-col cols=\"12\" v-else>\r\n          <m-datatable\r\n            :headers=\"headers\"\r\n            :filters.sync=\"filters\"\r\n            v-model=\"factors\"\r\n            :showExportBtns=\"false\"\r\n            :items=\"item.factors\"\r\n            ref=\"datatable\"\r\n          ></m-datatable>\r\n        </v-col>\r\n      </v-row>\r\n    </template>\r\n  </m-form>\r\n</template>\r\n\r\n<script>\r\nimport { MFormMixin } from \"@bit/mmd-mostafaee.vue.m-form\";\r\nimport DistributionApiMixin from \"@/modules/distribution/api\";\r\nimport mtime from \"@/components/mcomponents/cleave/Time\";\r\nimport FormsMixin from \"@/mixin/forms\";\r\nimport TreeSelect from \"@/components/selects/TreeSelect\";\r\nimport { PathLevels, VisitorLevels } from \"@/variables\";\r\n\r\nexport default {\r\n  name: \"DistributionForm\",\r\n  mixins: [MFormMixin, DistributionApiMixin, FormsMixin],\r\n  components: { mtime, TreeSelect },\r\n  props: {\r\n    id: {},\r\n  },\r\n  data() {\r\n    return {\r\n      baseUrl: \"distributions/distributions\",\r\n      permissionBasename: \"distributions\",\r\n      appendSlash: true,\r\n      hasList: false,\r\n      hasIdProp: true,\r\n      filters: {\r\n        type: \"sale\",\r\n        is_definite: true,\r\n        is_loaded: false,\r\n      },\r\n      factors: [],\r\n      PathLevels,\r\n      VisitorLevels,\r\n    };\r\n  },\r\n  computed: {\r\n    headers() {\r\n      return [\r\n        {\r\n          text: \"شماره\",\r\n          value: \"code\",\r\n        },\r\n        {\r\n          text: \"تاریخ\",\r\n          value: \"date\",\r\n          type: \"date\",\r\n        },\r\n        {\r\n          text: \"خریدار\",\r\n          value: \"account.name\",\r\n        },\r\n        {\r\n          text: \"شرح\",\r\n          value: \"explanation\",\r\n        },\r\n        {\r\n          text: \"مبلغ کل فاکتور\",\r\n          value: \"total_sum\",\r\n          type: \"numeric\",\r\n        },\r\n        {\r\n          text: \"ویزیتور\",\r\n          value: \"visitor\",\r\n          items: this.visitors\r\n            .filter((o) => o.level == 3)\r\n            .map((o) => {\r\n              return { text: o.user.name, value: o.id };\r\n            }),\r\n          itemText: \"user.name\",\r\n          itemValue: \"id\",\r\n        },\r\n      ];\r\n    },\r\n  },\r\n  methods: {\r\n    getItemTemplate() {\r\n      return {\r\n        factors: [],\r\n      };\r\n    },\r\n    getItemByPosition(position) {\r\n      return this.request({\r\n        url: this.endpoint(`${this.baseUrl}/byPosition/`),\r\n        method: \"get\",\r\n        params: {\r\n          id: this.item.id,\r\n          position: position,\r\n        },\r\n        success: (data) => {\r\n          this.setItem(data);\r\n        },\r\n      });\r\n    },\r\n    getData() {\r\n      this.getCars();\r\n      this.getVisitors();\r\n      this.getPaths();\r\n    },\r\n    setItem(item) {\r\n      this.item = item;\r\n      this.changeRouteTo(item.id);\r\n      this.factors = this.copy(item.factors);\r\n    },\r\n    getSerialized() {\r\n      let item = this.extractIds(this.item);\r\n      item.factors = this.factors.map((o) => o.id);\r\n      return item;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\"></style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DistributionForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DistributionForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DistributionForm.vue?vue&type=template&id=5ab3157d&scoped=true&\"\nimport script from \"./DistributionForm.vue?vue&type=script&lang=js&\"\nexport * from \"./DistributionForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ab3157d\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VAutocomplete,VCol,VRow,VTextField,VTextarea})\n"],"sourceRoot":""}